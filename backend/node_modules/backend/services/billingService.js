const Billing = require('../models/billing');

// Create a new billing record
const createBilling = async (billingData) => {
    return await Billing.create(billingData);
};

// Get all billing records
const getBillings = async () => {
    return await Billing.findAll();
};

// Get a billing record by ID
const getBillingById = async (id) => {
    return await Billing.findOne({ where: { bil_id: id } });
};

// Update a billing record
const updateBilling = async (id, updateData) => {
    const billing = await Billing.findOne({ where: { bil_id: id } });
    if (!billing) {
        throw new Error('Billing record not found');
    }
    await billing.update(updateData);
    return billing;
};

// Delete a billing record
const deleteBilling = async (id) => {
    const billing = await Billing.findOne({ where: { bil_id: id } });
    if (!billing) {
        throw new Error('Billing record not found');
    }
    await billing.destroy();
    return { message: 'Billing record deleted successfully' };
};

module.exports = { createBilling, getBillings, getBillingById, updateBilling, deleteBilling };
